{# app/templates/transactions/partials/_filter_drawer.html - Mobile filter drawer #}
<form id="mobile-filter-form"
      hx-get="/transactions"
      hx-target="#results-container"
      hx-indicator="#loading-indicator"
      hx-trigger="submit"
      class="space-y-4">
  
  {# Account #}
  <div class="form-control">
    <label class="label" for="mobile-filter-account">
      <span class="label-text font-medium">Account</span>
    </label>
    <select name="account_id" 
            id="mobile-filter-account"
            class="select select-bordered w-full">
      <option value="">All accounts</option>
      {% for account in accounts %}
      <option value="{{ account.id }}" 
              {% if filters.account_id == account.id %}selected{% endif %}>
        {{ account.institution }} • {{ account.name }}
      </option>
      {% endfor %}
    </select>
  </div>

  {# Card #}
  <div class="form-control">
    <label class="label" for="mobile-filter-card">
      <span class="label-text font-medium">Card</span>
    </label>
    <select name="card_id" 
            id="mobile-filter-card"
            class="select select-bordered w-full"
            {% if not cards or cards|length == 0 %}disabled{% endif %}>
      <option value="">All cards</option>
      {% for card in cards %}
      <option value="{{ card.id }}"
              {% if filters.card_id == card.id %}selected{% endif %}>
        {{ card.name }} • ****{{ card.card_masked_number[-4:] }}
      </option>
      {% endfor %}
    </select>
  </div>

  {# Custom Date Range #}
  <div class="form-control">
    <label class="label">
      <span class="label-text font-medium">Date Range</span>
    </label>
    <div class="grid grid-cols-2 gap-2">
      <div>
        <label class="label" for="mobile-filter-date-from">
          <span class="label-text text-xs">From</span>
        </label>
        <input type="date" 
               name="date_from" 
               id="mobile-filter-date-from"
               value="{{ filters.date_from or '' }}"
               class="input input-bordered w-full" />
      </div>
      <div>
        <label class="label" for="mobile-filter-date-to">
          <span class="label-text text-xs">To</span>
        </label>
        <input type="date" 
               name="date_to" 
               id="mobile-filter-date-to"
               value="{{ filters.date_to or '' }}"
               class="input input-bordered w-full" />
      </div>
    </div>
  </div>

  {# Transaction Kind #}
  <div class="form-control">
    <label class="label" for="mobile-filter-kind">
      <span class="label-text font-medium">Kind</span>
    </label>
    <select name="kind" 
            id="mobile-filter-kind"
            class="select select-bordered w-full">
      <option value="">All kinds</option>
      <option value="purchase" {% if filters.kind == 'purchase' %}selected{% endif %}>Purchase</option>
      <option value="topup" {% if filters.kind == 'topup' %}selected{% endif %}>Top-up</option>
      <option value="refund" {% if filters.kind == 'refund' %}selected{% endif %}>Refund</option>
      <option value="other" {% if filters.kind == 'other' %}selected{% endif %}>Other</option>
    </select>
  </div>

  {# Direction #}
  <div class="form-control">
    <label class="label">
      <span class="label-text font-medium">Direction</span>
    </label>
    <div class="flex gap-4">
      <label class="flex items-center gap-2 cursor-pointer">
        <input type="radio" 
               name="direction" 
               value="" 
               class="radio"
               {% if not filters.direction %}checked{% endif %} />
        <span>All</span>
      </label>
      <label class="flex items-center gap-2 cursor-pointer">
        <input type="radio" 
               name="direction" 
               value="out" 
               class="radio"
               {% if filters.direction == 'out' %}checked{% endif %} />
        <span>Out</span>
      </label>
      <label class="flex items-center gap-2 cursor-pointer">
        <input type="radio" 
               name="direction" 
               value="in" 
               class="radio"
               {% if filters.direction == 'in' %}checked{% endif %} />
        <span>In</span>
      </label>
    </div>
  </div>

  {# Amount Range #}
  <div class="form-control">
    <label class="label">
      <span class="label-text font-medium">Amount Range</span>
    </label>
    <div class="grid grid-cols-2 gap-2">
      <fieldset class="validator">
        <input type="number" 
               name="min_amount" 
               placeholder="Min"
               value="{{ filters.min_amount or '' }}"
               step="0.01"
               class="input input-bordered w-full" />
        <div class="validator-hint">Enter valid amount</div>
      </fieldset>
      <fieldset class="validator">
        <input type="number" 
               name="max_amount" 
               placeholder="Max"
               value="{{ filters.max_amount or '' }}"
               step="0.01"
               class="input input-bordered w-full" />
        <div class="validator-hint">Enter valid amount</div>
      </fieldset>
    </div>
  </div>

  {# Currency #}
  <div class="form-control">
    <label class="label" for="mobile-filter-currency">
      <span class="label-text font-medium">Currency</span>
    </label>
    <select name="currency" 
            id="mobile-filter-currency"
            class="select select-bordered w-full">
      <option value="">All currencies</option>
      {% for curr in currencies %}
      <option value="{{ curr }}" {% if filters.currency == curr %}selected{% endif %}>{{ curr }}</option>
      {% endfor %}
    </select>
  </div>

  {# Actions #}
  <div class="flex gap-2 pt-4">
    <button type="submit" class="btn btn-primary flex-1">Apply Filters</button>
    <button type="button" 
            class="btn btn-ghost"
            hx-get="/transactions"
            hx-vals='{"reset": "true"}'
            hx-target="#results-container"
            onclick="document.getElementById('filter-drawer').checked = false">
      Reset
    </button>
  </div>
</form>
