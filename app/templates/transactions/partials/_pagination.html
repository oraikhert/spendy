{% macro pagination(page, per_page, total, pagination_params) %}
{% set total_pages = ((total + per_page - 1) / per_page)|int if total > 0 else 1 %}
{% set show_pages = [total_pages, 5]|min %}
{% if total_pages > 1 %}
<nav class="flex justify-center mt-4" aria-label="Pagination">
  <ul class="join">
    <li>
      {% if page > 1 %}
      <a
        class="join-item btn btn-sm"
        href="/transactions?page={{ page - 1 }}&per_page={{ per_page }}{{ pagination_params }}"
        hx-get="/transactions?page={{ page - 1 }}&per_page={{ per_page }}{{ pagination_params }}"
        hx-target="#results"
        hx-swap="innerHTML"
      >Prev</a>
      {% else %}
      <span class="join-item btn btn-sm btn-disabled">Prev</span>
      {% endif %}
    </li>
    {% for p in range(1, show_pages + 1) %}
    <li>
      {% if p == page %}
      <span class="join-item btn btn-sm btn-active">{{ p }}</span>
      {% else %}
      <a
        class="join-item btn btn-sm"
        href="/transactions?page={{ p }}&per_page={{ per_page }}{{ pagination_params }}"
        hx-get="/transactions?page={{ p }}&per_page={{ per_page }}{{ pagination_params }}"
        hx-target="#results"
        hx-swap="innerHTML"
      >{{ p }}</a>
      {% endif %}
    </li>
    {% endfor %}
    <li>
      {% if page < total_pages %}
      <a
        class="join-item btn btn-sm"
        href="/transactions?page={{ page + 1 }}&per_page={{ per_page }}{{ pagination_params }}"
        hx-get="/transactions?page={{ page + 1 }}&per_page={{ per_page }}{{ pagination_params }}"
        hx-target="#results"
        hx-swap="innerHTML"
      >Next</a>
      {% else %}
      <span class="join-item btn btn-sm btn-disabled">Next</span>
      {% endif %}
    </li>
  </ul>
</nav>
{% endif %}
{% endmacro %}
